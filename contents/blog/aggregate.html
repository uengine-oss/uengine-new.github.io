<!DOCTYPE html>
<html lang="ko">
    <head>
        
        <title>uEngine &mdash; The AI-first Company</title>
        <meta name="description" content="유엔진솔루션즈 블로그는 복잡한 기술 개념을 누구나 쉽게 이해할 수 있도록 풀어냅니다.">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
        <!-- Favicon -->
        <link rel="icon" href="../../images/favicon.png" type="image/png" sizes="any">

        <!-- CSS -->
        <link rel="stylesheet" href="../../css/bootstrap.min.css">
        <link rel="stylesheet" href="../../css/style.css?after">
        <link rel="stylesheet" href="../../css/style-responsive.css">
        <link rel="stylesheet" href="../../css/vertical-rhythm.min.css">
        <link rel="stylesheet" href="../../css/magnific-popup.css">
        <link rel="stylesheet" href="../../css/owl.carousel.css">
        <link rel="stylesheet" href="../../css/splitting.css">
        <link rel="stylesheet" href="../../css/YTPlayer.css">
        <link rel="stylesheet" href="../../css/demo-main/demo-main.css">
        
        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet"> 

    </head>
    <body class="appear-animate">
        
        <!-- Page Loader -->        
        <div class="page-loader">
            <div class="loader">Loading...</div>
        </div>
        <!-- End Page Loader -->

        <!-- Skip to Content -->
        <a href="#main" class="btn skip-to-content">Skip to Content</a>
        <!-- End Skip to Content -->
        
        <!-- Page Wrap -->
        <div class="page" id="top">
            
            <!-- Navigation Panel -->
            <nav class="main-nav dark light-after-scroll transparent stick-fixed wow-menubar">
                <div class="main-nav-sub full-wrapper">
                    
                    <div class="nav-logo-wrap local-scroll">
                        <a href="../../index.html" class="logo">
                            <img src="../../images/logo-w.png" alt="uEngine Logo" width="105" height="34" class="logo-white" />
                            <img src="../../images/logo-b.png" alt="uEngine Logo" width="105" height="34" class="logo-dark" />
                        </a>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <div class="mobile-nav" role="button" tabindex="0">
                        <!-- 모바일 문의하기 -->
                        <a href="../contactus.html" class="opacity-1 no-hover mobile-chat"><span class="link-hover-anim underline" data-link-animate="y">문의하기</span></a>

                        <i class="mobile-nav-icon"></i>
                        <span class="visually-hidden">Menu</span>
                    </div>
                    
                    <!-- Main Menu -->
                    <div class="inner-nav desktop-nav">
                        <ul class="clearlist local-scroll">
                            
                            <!-- Item With Sub -->
                            <li>
                                <a href="#" class="mn-has-sub active">AI For Development <i class="mi-chevron-down"></i></a>
                                
                                <!-- Sub Megamenu -->
                                <ul class="mn-sub mn-has-multi">
                                    
                                    <!-- Sub Column -->
                                    <li class="mn-sub-multi">
                                        <span class="mn-group-title">&lt;Products&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="https://www.msaez.io/" target="_blank" style="font-size: 18px;">Robo Architect</a>
                                            </li>
                                            <li>
                                                <a href="../legacymodernizer.html" style="font-size: 18px;">Robo Analyzer</a>
                                            </li>
                                            <li>
                                                <a href="../dreamvibe.html" style="font-size: 18px;">DreamVibe</a>
                                            </li>
                                        </ul>

                                        <span class="mn-group-title" style="margin-top: 20px;">&lt;Education&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="https://www.msaschool.io/operation/introduction/" target="_blank" style="font-size: 18px;">Education for MSA</a>
                                            </li>
                                            <li>
                                                <a href="../educationvibecoding.html" style="font-size: 18px;">Education for Vibecoding</a>
                                            </li>                                            
                                        </ul>

                                        <span class="mn-group-title" style="margin-top: 20px;">&lt;Cunsulting&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="../consultingmsa.html" style="font-size: 18px;">MSA Consulting</a>
                                            </li>
                                            <li>
                                                <a href="../leaddevelopment.html" style="font-size: 18px;">선도개발 구현 컨설팅</a>
                                            </li>                                        
                                        </ul>

                                        <ul style="margin-top: 30px;">
                                            <li>
                                                <a href="../casestudiesmsa.html" style="font-size: 18px;">Case Studies</a>
                                            </li>
                                        </ul>                                    
                                    </li>
                                    <!-- End Sub Column -->                                    
                                </ul>
                                <!-- End Sub Megamenu -->
                                
                            </li>
                            <!-- End Item With Sub -->

                            <!-- Item With Sub -->
                            <li>
                                <a href="#" class="mn-has-sub active">AI For Business Process <i class="mi-chevron-down"></i></a>
                                
                                <!-- Sub Megamenu -->
                                <ul class="mn-sub mn-has-multi">
                                    
                                    <!-- Sub Column -->
                                    <li class="mn-sub-multi">
                                        <span class="mn-group-title">&lt;Products&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="../uengine6bpm.html" style="font-size: 18px;">uEngine6 BPM</a>
                                            </li>
                                            <li>
                                                <a href="../processgpt.html" style="font-size: 18px;">Process GPT</a>
                                            </li>
                                        </ul>

                                        <span class="mn-group-title" style="margin-top: 20px;">&lt;Education&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="../educationbpm.html" style="font-size: 18px;">Education for BPM</a>
                                            </li>
                                            <li>
                                                <a href="../educationforai.html" style="font-size: 18px">수요자용 AI 교육</a>
                                            </li>
                                            <li>
                                                <a href="../educationaiagent.html" style="font-size: 18px">공급자용 AI 교육</a>
                                            </li>
                                        </ul>

                                        <span class="mn-group-title" style="margin-top: 20px;">&lt;Cunsulting&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="../consultingbpm.html" style="font-size: 18px">BPM Consulting</a>
                                            </li>
                                        </ul>

                                        <ul style="margin-top: 30px;">
                                            <li>
                                                <a href="../casestudiesbpm.html" style="font-size: 18px;">Case Studies</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <!-- End Sub Column -->                                    
                                </ul>
                                <!-- End Sub Megamenu -->
                                
                            </li>
                            <!-- End Item With Sub -->

                            <!-- Item With Sub -->
                            <li>
                                <a href="#" class="mn-has-sub active">About <i class="mi-chevron-down"></i></a>
                                
                                <!-- Sub Megamenu -->
                                <ul class="mn-sub mn-has-multi">
                                    
                                    <!-- Sub Column -->
                                    <li class="mn-sub-multi">
                                        <!-- <span class="mn-group-title">&lt;Company&gt;</span> -->
                                        <ul>
                                            <li>
                                                <a href="../history.html" style="font-size: 18px;">History</a>
                                            </li>
                                            <li>
                                                <a href="../partners.html" style="font-size: 18px;">Partners</a>
                                            </li>
                                        </ul>

                                    </li>
                                    <!-- End Sub Column -->                                    
                                </ul>
                                <!-- End Sub Megamenu -->
                                
                            </li>
                            <!-- End Item With Sub -->

                            <!-- Item With Sub -->
                            <li>
                                <a href="#" class="mn-has-sub active">Insights <i class="mi-chevron-down"></i></a>
                                
                                <!-- Sub Megamenu -->
                                <ul class="mn-sub mn-has-multi">
                                    
                                    <!-- Sub Column -->
                                    <li class="mn-sub-multi">
                                        <span class="mn-group-title">&lt;News&gt;</span>
                                        <ul>
                                            <li>
                                                <a href="../newsroom.html" style="font-size: 18px;">Newsroom</a>
                                            </li>
                                            <li>
                                                <a href="https://uengine.stibee.com/" target="_blank" style="font-size: 18px;">Newsletter</a>
                                            </li>
                                            <li>
                                                <a href="../interview.html" style="font-size: 18px;">Interview</a>
                                            </li>
                                        </ul>

                                        <span class="mn-group-title" style="margin-top: 20px;">&lt;Seminar&gt;</span>
                                        <ul>
                                           <li>
                                                <a href="../webinars.html" style="font-size: 18px;">webinars</a>
                                            </li>
                                        </ul>

                                        <ul style="margin-top: 30px;">
                                            <li>
                                                <a href="../bloglist.html" style="font-size: 18px;">Blogs</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <!-- End Sub Column -->                                    
                                </ul>
                                <!-- End Sub Megamenu -->
                                
                            </li>
                            <!-- End Item With Sub -->
                        </ul>
                        
                        <ul class="items-end clearlist">
                                                      
                            <li class="pc-chat"><a href="../contactus.html" class="opacity-1 no-hover"><span class="link-hover-anim underline" data-link-animate="y">문의하기</span></a></li>
                            <!-- <li><a href="../bloglist.html" class="opacity-1 no-hover"><span class="link-hover-anim underline" data-link-animate="y">Blogs</span></a></li> -->
 
                        </ul>                        
                        
                    </div>
                    <!-- End Main Menu -->
                    
                </div>
            </nav>
            <!-- End Navigation Panel -->
            
            <main id="main">
            
                <!-- Header Section -->
                <section class="page-section bg-dark-1 bg-dark-alpha-70 light-content parallax-5" style="background-image: url(../../images/full-width-images/section-bg-1.jpg)">
                    <div class="container position-relative pt-30 pt-sm-50">
                        
                        <!-- Section Content -->
                        <div class="text-center">
                            <div class="row">
                                
                                <!-- Page Title -->
                                <div class="col-md-8 offset-md-2">
                                        
                                    <h1 class="hs-title-0 mb-20">
                                        <span class="wow charsAnimIn" data-splitting="chars">어그리게이트(Aggregate) 모범 사례</span>
                                    </h1>
                                    
                                    <!-- Author, Categories, Comments -->
                                    <div class="blog-item-data mt-30 mt-sm-10 mb-0 wow fadeInUp" data-wow-delay="0.2s">
                                        <div class="d-inline-block me-3">
                                            <a href="#"><i class="mi-clock size-16"></i><span class="visually-hidden">Date:</span> August 28, 2024</a>
                                        </div>
                                    </div>
                                    <!-- End Author, Categories, Comments -->
                               
                               </div>
                               <!-- End Page Title -->
                                
                            </div>                            
                        </div>
                        <!-- End Section Content -->
                        
                    </div>           
                </section>
                <!-- End Header Section -->
                
                
                <!-- Section -->
                <section class="page-section">
                    <div class="container relative">
                        
                        <div class="row">
                            
                            <!-- Content -->
                            <div class="col-lg-8 offset-lg-2">
                                
                                <!-- Post -->
                                <div class="blog-item mb-80 mb-xs-40">
                                    
                                    <div class="blog-item-body chat-gpt">
                                    
                                        <!-- Media Gallery -->
                                        <!-- <div class="blog-media mb-40 mb-xs-30">
                                            <div>
                                                <img src="../../images/blog/blog03.jpg" alt="아기 돼지 삼형제" />
                                            </div>
                                        </div>                                         -->

                                        <blockquote>
                                            <p>
                                                &nbsp;이 글은 JPA/Hibernate를 사용할 때 도메인 주도 설계(DDD) 원칙을 적용하여 흔한 문제들을 해결하는 방법에 대해 설명합니다. JPA와 Hibernate를 사용하면서 경험할 수 있는 여러 가지 문제점들을 소개하고, 이를 해결하기 위한 접근 방법을 제시합니다.
                                            </p>
                                        </blockquote>

                                        <div class="mb-50">
                                            <p style="text-decoration: underline;"><b>JPA/Hibernate를 사용하면서 다음과 같은 문제들을 경험할 수 있습니다.</b></p>
                                            <ul class="mt-20">
                                                <li class="mb-10">의도치 않은 즉시 로딩으로 인한 전체 데이터베이스 메모리 로드</li>
                                                <li class="mb-10">N+1 지연 로딩 문제</li>
                                                <li class="mb-10">의도치 않은 즉시 ToOne 매핑</li>
                                                <li class="mb-10">LazyInitializationException</li>
                                                <li class="mb-10">의도치 않은 연쇄 삭제 또는 고아 레코드</li>
                                                <li>의도치 않은 즉시 로딩으로 인한 성능 저하</li>
                                            </ul>
                                            <p>이러한 문제들은 대부분 설계 단계에서의 일관성 없는 결정으로 인해 발생합니다. 이 교육 자료에서는 도메인 주도 설계 원칙을 적용하여 이러한 문제들을 해결하는 방법을 소개합니다.</p>
                                        </div>

                                        <blockquote>
                                            <p>
                                                &nbsp;관계형 데이터베이스 스키마 설계
                                            </p>
                                        </blockquote>

                                        <div class="mb-50">
                                            <p>
                                                도메인 주도 설계를 적용하려면 먼저 비즈니스 하위 도메인을 정의해야 합니다. 그 다음, 관계형 데이터베이스에 저장할 어그리게이트/엔티티를 정의할 수 있습니다.
                                                <br>중요한 점은 Hibernate 엔티티 설계로 시작하지 않고, 먼저 엔티티 관계 다이어그램(ERD)을 만드는 것입니다.
                                            </p>
                                            <p style="text-decoration: underline;"><b>예를 들어, 다음과 같은 엔티티들이 있다고 가정해봅시다.</b></p>
                                            <ul class="mt-20">
                                                <li class="mb-10">Customer (고객)</li>
                                                <li class="mb-10">Customer Home Address (고객 집 주소)</li>
                                                <li class="mb-10">Order (주문)</li>
                                                <li class="mb-10">Order Line (주문 라인: 각 제품의 수량)</li>
                                                <li class="mb-10">Shipping Address (배송 주소)</li>
                                                <li class="mb-10">Product (제품)</li>
                                                <li>Product Category (제품 카테고리)</li>
                                            </ul>
                                            <p>이들 간의 기본적인 관계를 나타내는 ERD는 다음과 같습니다.</p>
                                        </div>

                                        <div class="blog-media mb-40 mb-xs-30">
                                            <div>
                                                <img src="https://github.com/user-attachments/assets/b074c0e1-8a12-42c6-8f29-56bd053c0531" alt="관계형 데이터베이스 스키마 설계" />
                                            </div>
                                        </div> 

                                        <blockquote>
                                            <p>
                                                &nbsp;어그리게이트 루트 찾기
                                            </p>
                                        </blockquote>

                                        <div class="mb-50">
                                            <p>
                                                도메인 주도 설계에서 어그리게이트 루트는 "전체 어그리게이트에 대한 게이트웨이 역할을 하는 엔티티로, 어그리게이트의 무결성과 일관성을 유지하는 역할"을 합니다. 간단히 말해, 서비스에서 가장 중요하고 관련성 있는 주요 엔티티를 찾는 것입니다.
                                            </p>
                                            <p style="text-decoration: underline;"><b>예를 들어, 다음과 같은 요구사항이 있다고 가정해봅시다.</b></p>
                                            <ol class="mt-20">
                                                <li class="mb-10">이메일 주소로 고객을 쉽게 검색할 수 있어야 함</li>
                                                <li class="mb-10">고객의 집 주소를 쉽게 조회할 수 있어야 함</li>
                                                <li class="mb-10">특정 고객의 주문을 쉽게 조회할 수 있어야 함</li>
                                                <li>특정 주문의 정보를 쉽게 조회할 수 있어야 함 (주문에 포함된 다양한 제품 및 각 제품의 수량 포함)</li>
                                            </ol>
                                            <p>이러한 요구사항을 바탕으로 Customer, Order, Product를 어그리게이트 루트로 그룹화할 수 있습니다.</p>
                                        </div>

                                        <div class="mb-50">
                                            <p class="mid-title"><b>휴리스틱 1: Spring Repository는 어그리게이트 루트 엔티티에 대해서만 정의되어야 합니다.</b></p>
                                            <p>따라서 CustomerRepository, OrderRepository, ProductRepository만 정의해야 합니다.</p>
                                        </div>

                                        <div class="blog-media mb-40 mb-xs-30">
                                            <div>
                                                <img src="https://github.com/user-attachments/assets/24a91c6e-bb3a-4dfb-940d-2938a3f4844b" alt="어그리게이트 루트 찾기" />
                                            </div>
                                        </div> 

                                        <blockquote>
                                            <p>
                                                &nbsp;Hibernate 관계 매핑 시 4가지 결정 사항
                                            </p>
                                        </blockquote>

                                        <div class="mb-50">
                                            <p style="text-decoration: underline;"><b>Hibernate 관계 매핑을 만들 때 다음 4가지 결정을 해야 합니다.</b></p>
                                            <ol class="mt-20">
                                                <li class="mb-10">관계 매핑을 만들지 여부</li>
                                                <li class="mb-10">단방향 또는 양방향 관계</li>
                                                <li class="mb-10">지연 또는 즉시 로딩</li>
                                                <li>연쇄 작업(Cascade) 설정</li>
                                            </ol>
                                        </div>

                                        <blockquote>
                                            <p>
                                                &nbsp;Hibernate 관계 매핑 시 4가지 결정 사항<br>&nbsp;1. 관계 매핑을 만들지 여부
                                            </p>
                                        </blockquote>

                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 2: 어그리게이트 내에서는 @OneToOne 또는 일부 @ManyToOne 대신 Value 객체 사용을 고려하세요.</b></p>
                                            <p>예를 들어, HomeAddress는 엔티티가 아닌 Value 객체로 처리할 수 있습니다. JPA에서는 @Embeddable과 @Embedded 어노테이션을 사용하여 이를 구현할 수 있습니다.</p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java">
@Embeddable
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
    <span class="hljs-keyword">private</span> String street;
    <span class="hljs-keyword">private</span> String city;
    <span class="hljs-keyword">private</span> String zipCode;
    <span class="hljs-comment">// getters and setters</span>
}

@Entity
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span> {
    @Id
    <span class="hljs-keyword">private</span> Long id;

    @Embedded
    <span class="hljs-keyword">private</span> Address homeAddress;
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>
                                        
                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 3: 어그리게이트 루트 간의 관계 매핑은 피하고, 외래 키를 그대로 매핑하세요.</b></p>
                                            <p>예를 들어, Order 엔티티에서 Customer로의 관계를 다음과 같이 매핑할 수 있습니다.</p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java">
@Entity
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    @Id
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> Long customerId; <span class="hljs-comment">// 외래 키를 그대로 사용</span>
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>

                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 4: 다른 어그리게이트 루트와의 관계 매핑은 관계가 유한할 때만 허용하세요.</b></p>
                                            <p>예를 들어, Product와 ProductCategory 간의 관계는 유한하므로 다음과 같이 매핑할 수 있습니다.</p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@ManyToOne</span>
    <span class="hljs-meta">@JoinColumn(name = "category_id")</span>
    <span class="hljs-keyword">private</span> ProductCategory category;
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>

                                        <blockquote>
                                            <p>
                                                &nbsp;Hibernate 관계 매핑 시 4가지 결정 사항<br>&nbsp;2. 단방향 또는 양방향 관계
                                            </p>
                                        </blockquote>

                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 5: 항상 단방향 관계로 시작하세요. 필요가 생기고 관계가 어그리게이트 루트를 넘지 않을 때만 양방향 관계로 변환하세요.</b></p>
                                            <p>예를 들어, Order와 OrderLine 간의 관계는 다음과 같이 단방향으로 시작할 수 있습니다.</p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-keyword">private</span> List&lt;OrderLine&gt; orderLines = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-comment">// other fields, getters and setters</span>
}

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderLine</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>
                                        
                                        <blockquote>
                                            <p>
                                                &nbsp;Hibernate 관계 매핑 시 4가지 결정 사항<br>&nbsp;3. 지연 또는 즉시 로딩
                                            </p>
                                        </blockquote>

                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 6: 어그리게이트 루트에서 모든 자식 관계를 지연 로딩으로 시작하세요. 관련 엔티티가 항상 필요한 경우에만 즉시 로딩으로 변환하세요.</b></p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-keyword">private</span> List&lt;OrderLine&gt; orderLines = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>
                                        
                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 7: 다른 어그리게이트 루트와의 관계가 있다면 절대 즉시 로딩을 사용하지 마세요.</b></p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@ManyToOne(fetch = FetchType.LAZY)</span>
    <span class="hljs-meta">@JoinColumn(name = "category_id")</span>
    <span class="hljs-keyword">private</span> ProductCategory category;
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>

                                        <blockquote>
                                            <p>
                                                &nbsp;Hibernate 관계 매핑 시 4가지 결정 사항<br>&nbsp;4. 연쇄 작업(Cascade) 설정
                                            </p>
                                        </blockquote>

                                        <div class="mb-20">
                                            <p class="mid-title"><b>휴리스틱 8: 어그리게이트 루트가 아닌 모든 엔티티에 대해 연쇄 작업을 설정하세요. 연관된 어그리게이트 엔티티에 대해서는 연쇄 작업을 설정하지 마세요.</b></p>
                                        </div>

<div class="p-4 overflow-y-auto bg-gray-950 rounded-md mb-50">
<code class="!whitespace-pre hljs language-java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-keyword">private</span> List&lt;OrderLine&gt; orderLines = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">private</span> Long customerId; <span class="hljs-comment">// 다른 어그리게이트 루트에 대해서는 cascade 설정 없음</span>
    <span class="hljs-comment">// other fields, getters and setters</span>
}
</code>
</div>


                                        <blockquote>
                                            <p>
                                                &nbsp;결론
                                            </p>
                                        </blockquote>

                                        <div class="mb-50">
                                            <p>
                                                이 교육 자료에서는 도메인 주도 설계 개념을 JPA/Hibernate 관계 설계에 적용하는 방법에 대해 설명했습니다. 다음은 8가지 휴리스틱을 요약한 것입니다.
                                            </p>
                                            <ol class="mt-20" style="font-weight: bold;">
                                                <li class="mb-10">Spring Repository는 어그리게이트 루트 엔티티에 대해서만 정의되어야 합니다.</li>
                                                <li class="mb-10">어그리게이트 내에서는 @OneToOne 또는 일부 @ManyToOne 대신 Value 객체 사용을 고려하세요.</li>
                                                <li class="mb-10">어그리게이트 루트 간의 관계 매핑은 피하고, 외래 키를 그대로 매핑하세요.</li>
                                                <li class="mb-10">다른 어그리게이트 루트와의 관계 매핑은 관계가 유한할 때만 허용하세요.</li>
                                                <li class="mb-10">항상 단방향 관계로 시작하세요. 필요가 생기고 관계가 어그리게이트 루트를 넘지 않을 때만 양방향 관계로 변환하세요.</li>
                                                <li class="mb-10">어그리게이트 루트에서 모든 자식 관계를 지연 로딩으로 시작하세요. 관련 엔티티가 항상 필요한 경우에만 즉시 로딩으로 변환하세요.</li>
                                                <li class="mb-10">다른 어그리게이트 루트와의 관계가 있다면 절대 즉시 로딩을 사용하지 마세요.</li>
                                                <li>어그리게이트 루트가 아닌 모든 엔티티에 대해 연쇄 작업을 설정하세요. 연관된 어그리게이트 엔티티에 대해서는 연쇄 작업을 설정하지 마세요.</li>
                                            </ol>
                                            <p>이러한 휴리스틱을 따르면 JPA/Hibernate를 사용할 때 발생할 수 있는 많은 문제들을 예방하고 더 효율적인 데이터베이스 설계를 할 수 있습니다.</p>
                                            <p class="mid-title"><b>*역자 comment : 지연로딩 부분은 동일 바운디드 컨텍스트 내에서는 허용 가능함</b></p>
                                        </div>

                                        <div class="mb-50">
                                            <p><a href="https://medium.com/@chikim79/applying-domain-driven-design-principles-for-jpa-hibernate-mappings-best-practices-17e9594c9fb4" target="_blank">원문 참조 : Applying Domain-Driven Design Principles for JPA/Hibernate Mappings Best Practices</a></p>
                                        </div>

                                        <div>
                                            <p>[출처] <a href="https://www.msaschool.io/operation/design/design-aggregate/">MSA School - 어그리게이트(Aggregate) 모범 사례</a></p>
                                        </div>
                                    </div>

                                </div>
                                <!-- End Post -->
                                
                                <!-- Prev/Next Post -->
                                <div class="clearfix mt-80">
                                    <a href="../bloglist.html" class="blog-item-more left"><i class="mi-chevron-left"></i>&nbsp;Back to blog</a>
                                </div>
                            </div>
                            <!-- End Content -->
                        
                        </div>
                        
                    </div>
                </section>
                <!-- End Section -->
           
           </main>
            
            <!-- Footer -->
            <footer class="page-section footer bg-gray-light-1 pb-30">
                <div class="container">
                    
                    <div class="row pb-120 pb-sm-80 pb-xs-50">
                                                
                        <div class="col-md-4 col-lg-4 text-gray mb-sm-50" style="font-size: 14px;">
                            
                            <div class="mb-30">
                                <img src="../../images/logo-b.png" width="105" height="34" alt="uEngine Logo" />
                            </div>
                            
                            <p>
                                유엔진솔루션즈는 2003년 이래 업무 프로세스 관리 (Business Process Management), AI, MSA, 기업용 SNS, PaaS 를 포함한 클라우드 플랫폼, 도메인 기반 개발 방법을 지향하는 개발 프레임워크 등을 개발하고 오픈소스 프로젝트로 제공하는 기술 집약적 기업입니다.
                            </p>
                            
                            <div>                                
                                <!-- 본사: 서울특별시 서초구 신반포로45길 18 5층 502호<br> -->
                                본사: 서울 서초구 사임당로 31 궁현빌딩 3층 301호<br>
                                지사: 경상남도 창원시 성산구 상남로37
                            </div>
                            
                            <div class="clearlinks">                                
                                <strong>T.</strong> 02.567.8301</a>
                            </div>
                            
                            <div class="clearlinks">
                                <strong>E.</strong> help@uengine.org</a>
                            </div>

                            <div class="clearlinks" style="margin-top: 5px;">                                
                                <a href="https://www.facebook.com/groups/cloudswmoding" rel="noopener nofollow" target="_blank">
                                    <i class="fa-facebook"></i>
                                    Facebook
                                </a>
                            </div>
                            
                            <div class="clearlinks">
                                <a href="https://www.youtube.com/channel/UCWXNEfACspVtCa-hyYBC76g" rel="noopener nofollow" target="_blank">
                                    <i class="fa-youtube"></i>
                                    Youtube
                                </a>
                            </div>
                        </div>
                        
                        <div class="col-md-7 offset-md-1 offset-lg-1">                            
                            <div class="row mt-n30">
                                
                                <!-- Footer Widget -->
                                <div class="col-sm-3 mt-30">
                                    
                                    <h3 class="fw-title">AI For Development</h3>
                                    
                                    <ul class="fw-menu clearlist">                                        
                                        <li><a href="../roboarchitect.html">Robo Architect</a></li>
                                        <li><a href="../legacymodernizer.html">Robo Analyzer</a></li>
                                        <li><a href="../dreamvibe.html">DreamVibe</a></li>
                                        <li><a href="https://www.msaschool.io/operation/introduction/" target="_blank">Education for MSA</a></li>
                                        <li><a href="../educationvibecoding.html">Education for Vibecoding</a></li>
                                        <li><a href="../consultingmsa.html">MSA Consulting</a></li>
                                        <li><a href="../leaddevelopment.html">선도개발 구현 컨설팅</a></li>
                                        <li><a href="../casestudiesmsa.html">Case Studies</a></li>
                                    </ul>
                                    
                                </div>
                                <!-- End Footer Widget -->
                                
                                <!-- Footer Widget -->
                                <div class="col-sm-3 mt-30">
                                    
                                    <h3 class="fw-title">AI For Business Process</h3>
                                    
                                    <ul class="fw-menu clearlist">                                        
                                        <li><a href="../uengine6bpm.html">uEngine6 BPM</a></li>
                                        <li><a href="../processgpt.html">Process GPT</a></li>
                                        <li><a href="../educationbpm.html">Education for BPM</a></li>
                                        <li><a href="../educationforai.html">수요자용 AI 교육</a></li>
                                        <li><a href="../educationaiagent.html">공급자용 AI 교육</a></li>
                                        <li><a href="../consultingbpm.html">BPM Consulting</a></li>
                                        <li><a href="../casestudiesbpm.html">Case Studies</a></li>
                                    </ul>
                                    
                                </div>
                                <!-- End Footer Widget -->
                                
                                <!-- Footer Widget -->
                                <div class="col-sm-2 mt-30">
                                    
                                    <h3 class="fw-title">About</h3>
                                    
                                    <ul class="fw-menu clearlist">                                        
                                        <li><a href="../history.html">History</a></li>
                                        <li><a href="../partners.html">Partners</a></li>
                                    </ul>
                                    
                                </div>
                                <!-- End Footer Widget -->

                                <!-- Footer Widget -->
                                <div class="col-sm-3 mt-30">
                                    
                                    <h3 class="fw-title">Insights</h3>
                                    
                                    <ul class="fw-menu clearlist">                                        
                                        <li><a href="../newsroom.html">Newsroom</a></li>
                                        <li><a href="https://uengine.stibee.com/" target="_blank">Newsletter</a></li>
                                        <li><a href="../interview.html">Interview</a></li>
                                        <li><a href="../webinars.html">Webinars</a></li>
                                        <li><a href="../bloglist.html">Blogs</a></li>
                                    </ul>
                                    
                                </div>
                                <!-- End Footer Widget -->
                            </div>                            
                        </div>
                        
                    </div>
                    
                    <!-- Footer Text -->
                    <div class="row text-gray">
                        
                        <div style="width: 100%; text-align: center; margin: 0 auto;">
                            <span style="font-size: 14px;">유엔진솔루션즈 | 사업자등록번호: 2118795355 | 대표: 장진영</span><br>
                            <b>© uEngine 2024. All Rights Reserved.</b>
                        </div>

                        <div class="col-md-4 col-lg-3">
                            <!-- <b>© uEngine 2024.</b> -->
                        </div>
                        
                        <div class="col-md-7 offset-md-1 offset-lg-2 clearfix">
                            
                            <!-- Back to Top Link -->
                            <div class="local-scroll float-end mt-n50 mt-sm-10">
                                <a href="#top" class="link-to-top">                                
                                    <i class="mi-arrow-up size-24"></i>
                                    <span class="visually-hidden">Scroll to top</span>
                                </a>
                            </div>
                            <!-- End Back to Top Link -->
                            
                        </div>
                        
                    </div>
                    <!-- End Footer Text --> 
                    
                 </div>                 
            </footer>
            <!-- End Footer -->
        
        </div>
        <!-- End Page Wrap -->      
        
        <!-- JS -->
        <script src="../../js/jquery.min.js"></script>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script src="../../js/plugins.js"></script>
        <script src="../../js/jquery.ajaxchimp.min.js"></script>             
        <script src="../../js/contact-form.js"></script>        
        <script src="../../js/all.js"></script> 
        <!-- End JS -->       
        
    </body>
</html>